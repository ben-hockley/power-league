{% extends "template.html" %}

{% block head %}
  <title>Home</title>
  <style>
    {% if team[15] %}
    .bg-primary {
      background-color: {{ team[15] }} !important;
    }
    {% endif %}
    {% if team[16] %}
    .text-secondary {
      color: {{ team[16] }} !important;
    }
    {% endif %}
  </style>
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-8">
      <h1 class="d-flex align-items-center">
        {% if svg_content %}
          <span class="me-3" style="height:56px;width:auto;display:inline-block;vertical-align:middle;">
            {{ svg_content | safe }}
          </span>
        {% elif team[17] %}
          <img src="{{ team[17] }}" alt="Team Badge" class="me-3" style="height:56px;width:auto;">
        {% endif %}
        {{ team[1] }}
        <span class="badge bg-primary text-secondary ms-2 fs-5 align-middle">
            Record: {{ team[10] }} - {{ team[11] }}
        </span>
      </h1>
      <div class="row">
        <div class="col-md-6">
          <!-- You can place other content here if needed -->
        </div>
        <div class="col-md-6">
          <!-- Manager card moved to right half and width halved -->
          <a href="/home/{{ team[14] }}" class="text-decoration-none recent-game-link">
            <div class="card shadow mb-4 recent-game-card transition-grow">
              <div class="card-header bg-primary text-secondary">
                Manager
              </div>
              <div class="card-body d-flex align-items-center">
                <img src="{{ manager[3] }}" alt="Manager Avatar" class="rounded-circle me-3" style="width:64px;height:64px;">
                <div>
                  <h5 class="card-title mb-0">{{ manager[1] }}</h5>
                  <p class="card-text mb-1">
                    <strong>Championships Won:</strong> {{ user_championships }}
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
      <!-- League and Season box -->
      <a href="/standings/{{ team_id }}" class="text-decoration-none recent-game-link">
      <div class="card shadow mb-4 recent-game-card transition-grow">
        <div class="card-header bg-primary text-secondary">
          League
        </div>
        <div class="card-body">
          <div class="fw-bold mb-1">
            League: {{ league[1] }}
          </div>
          <div>
            Current Season: {{ league[2] }}
          </div>
          <div>
            Current Year: {{ league[4] }}
          </div>
          <div>
            Draft Date: {{ draft_date }}
          </div>
          <div>
            Reigning Champions : {{ reigning_champion }}
          </div>
          <div>
            Championships Won: {{ number_of_championships }}
        </div>
      </div>
      </div>
      </a>
    </div>
    <div class="col-md-4">
      {% if most_recent_game %}
      <a href="/results/{{ most_recent_game[0] }}" class="text-decoration-none recent-game-link">
        <div class="card shadow mb-4 recent-game-card transition-grow">
          <div class="card-header bg-primary text-secondary">
            Most Recent Game
          </div>
          <div class="card-body">
            <h5 class="card-title">
              {{ most_recent_home_team[1] }} vs {{ most_recent_away_team[1] }}
            </h5>
            <p class="card-text mb-1">
              <strong>Date:</strong> {{ most_recent_game[4] }}
            </p>
            <p class="card-text mb-1">
              <strong>Score:</strong>
              {{ most_recent_home_team[1] }} {{ most_recent_home_score }} -
              {{ most_recent_away_score }} {{ most_recent_away_team[1] }}
            </p>
          </div>
        </div>
      </a>
      {% endif %}

      {% if next_fixture %}
      <a href="/fixtures/{{ team_id }}" class="text-decoration-none recent-game-link">
        <div class="card shadow mb-4 next-match-card transition-grow">
          <div class="card-header bg-primary text-secondary">
            Next Match
          </div>
          <div class="card-body">
            <h5 class="card-title">
              {{ next_home_team[1] }} vs {{ next_away_team[1] }}
            </h5>
            <p class="card-text mb-1">
              <strong>Date:</strong> {{ next_fixture[4] }}
            </p>
          </div>
        </div>
      </a>
      {% endif %}

      {% if star_players %}
      <a href="/roster/{{ team_id }}" class="text-decoration-none recent-game-link">
        <div class="card shadow mb-4 star-players-card transition-grow">
          <div class="card-header bg-primary text-secondary">
            Roster
          </div>
          <div class="card-body">
            {% for player in star_players[:3] %}
            <div class="d-flex align-items-center mb-3">
              <img src="/static/avatars/{{ player[0] }}.svg" alt="Avatar" class="rounded me-3" style="width:48px;height:48px;border:2px solid #007bff;background:#fff;">
              <div>
                <div class="fw-bold">{{ player[1] }} {{ player[2] }}</div>
                <div class="small text-muted">
                  Skill: <span class="fw-bold">{{ player[6] }}</span> |
                  Age: {{ player[3] }} |
                  Pos: {{ player[7] }}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </a>
      {% endif %}
    </div>
  </div>
</div>
<style>
.recent-game-link { display: block; }
.transition-grow {
  transition: transform 0.18s cubic-bezier(.4,2,.6,1);
}
.transition-grow:hover {
  transform: scale(1.04);
  z-index: 2;
}
</style>
{% endblock %}