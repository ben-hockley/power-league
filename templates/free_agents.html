{% extends "template.html" %}

{% block head %}
<title>Power League - Free Agents</title>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Free Agents</h2>
    <div class="card shadow">
        <div class="card-body">
            <div class="table-responsive">
                <table id="roster-table" class="table table-striped table-bordered align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>Name</th>
                            <th data-sort-method="number">Age</th>
                            <th data-sort-method="number">Draft Year</th>
                            <th data-sort-method="number">Draft Pick</th>
                            <th>Position</th>
                            <th data-sort-method="number">Skill</th>
                            <th>Sign</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for player in players %}
                        <tr>
                            <td class="fw-bold position-relative player-name-hover">
                                {{ player[1] }} {{ player[2] }}
                                <img src="/static/avatars/{{ player[0] }}.svg" alt="Avatar" class="player-avatar-hover" style="display:none; position:absolute; left:100%; top:50%; transform:translateY(-50%); width:64px; height:64px; z-index:10; border:2px solid #007bff; background:#fff; border-radius:8px;">
                            </td>
                            <td>{{ player[3] }}</td>
                            <td>{{ player[4] }}</td>
                            <td>{{ player[5] }}</td>
                            <td>{{ player[7] }}</td>
                            <td class="fw-bold">{{ player[6] }}</td>
                            <td>
                                <form method="POST" action="/sign_player/{{ team_id }}" style="display:inline;">
                                    <input type="hidden" name="player_id" value="{{ player[0] }}">
                                    <button type="submit" class="btn btn-success btn-sm">Sign</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/roster.js"></script>
{% endblock %}